# TwoDSurvival - Progress Tracker

## Completed Steps

| # | Task | Date | Notes |
|---|------|------|-------|
| 1 | Initial project setup | 2026-02-14 | Created Unreal Engine project with default structure |
| 2 | GitHub Actions setup | 2026-02-14 | Added Claude Code workflow for issue handling (no code review) |
| 3 | 2D side-view camera setup | 2026-02-14 | SpringArm + Camera on BaseCharacter, side-scroll view, plane-constrained movement, smooth camera lag |
| 4 | 2D movement with character rotation | 2026-02-14 | MoveRight() BlueprintCallable function — moves left/right in world space, rotates character to face movement direction via SetControlRotation |
| 5 | Interaction system | 2026-02-15 | IInteractable interface, EInteractionType enum, UInteractionComponent on BaseCharacter. Proximity detection via dynamic sphere. Hold timer with movement lock, progress 0→1. Input (E key) bound in C++ via EnhancedInput (IA_Interact). UMG progress bar uses Add to Viewport with Get Player Character binding. |
| 6 | Inventory system | 2026-02-20 | UInventoryComponent (C++) reusable on player + containers. UItemDefinition data asset. FInventorySlot struct. WBP_InventoryWidget dual-panel (player + container). WBP_InventorySlot with drag-and-drop and item stacking. Centralized RefreshAll() bound to OnInventoryChanged delegate. BP_Cabinet container actor. UseItem BlueprintNativeEvent (Consumable, applies HealthRestoreAmount). IA_ToggleInventory (Tab) bound in C++. |
| 7 | Inventory context menu | 2026-02-24 | Right-click on WBP_InventorySlot → WBP_ContextMenu spawned at cursor. Category-driven buttons: Consumable → Use, bCanBeEquipped → Equip. Focus-based dismissal (bIsFocusable + Set Keyboard Focus + On Focus Lost). Child buttons Is Focusable = false to prevent premature focus loss. Position via Get Mouse Position On Viewport + Set Position in Viewport (bRemoveDPIScale: false). |
| 8 | Weapon equip system | 2026-02-24 | AWeaponBase (C++) — StaticMeshComponent + BoxComponent hitbox (disabled by default), BaseDamage, SourceItemDef reference. WeaponActorClass (TSubclassOf) added to UItemDefinition. EquipItem_Implementation: spawns weapon actor, attaches to WeaponSocketName socket on character mesh, stores EquippedWeapon ref. UnequipWeapon_Implementation: destroys actor, clears ref. Context menu shows Unequip instead of Equip when slot item matches EquippedWeapon.SourceItemDef. |
| 9 | Interaction mid-air fix | 2026-02-24 | Replaced DisableMovement() with bMovementLocked bool on ABaseCharacter. MoveRight checks flag and returns early. Gravity and physics still apply during hold interactions — character no longer hangs in mid-air when interacting while airborne. |
| 10 | C++ max plan — programmatic input + widget C++ classes | 2026-02-25 | Removed all manual IA_HotbarSlot1-6/AllItemDefinitions UPROPERTYs. CreateInputActions() builds hotbar (1-6), scroll wheel, F5/F9 at runtime via NewObject. AssetRegistry auto-scans all UItemDefinition assets into ItemDefMap — no manual assignment needed. UBodyPartRowWidget, UHealthHUDWidget, UHotbarWidget created as C++ UUserWidget subclasses. HotbarWidget builds 6 slot borders/icons/key labels dynamically in NativeConstruct. ToggleHealthUI_Implementation creates/destroys health HUD, shows/hides mouse cursor. HotbarWidget created in BeginPlay and always visible. Build.cs updated with AssetRegistry module. |
| 11 | Health HUD widget | 2026-02-25 | WBP_HealthHUD (parent: UHealthHUDWidget) with 6x WBP_BodyPartRow rows. Each row has PartLabel (fixed MinDesiredWidth), HealthBar (Fill, color-coded green/yellow/red/grey), BrokenText overlaid on bar. TitleBar Border for drag-to-move. Drag uses delta-based approach with InitDragPosition() to sync viewport position from BaseCharacter. Mouse cursor shown on open, hidden on close. SetPositionInViewport on spawn fixes full-screen stretch issue. FInputModeGameAndUI on open so first click registers immediately. |
| 12 | Hotbar widget | 2026-02-25 | WBP_HotbarWidget (parent: UHotbarWidget). SlotContainer HorizontalBox — 6 slots built dynamically in C++ NativeConstruct (border + icon + key label). Active slot highlighted gold. Keys 1-6 and scroll wheel work via programmatic IMC. CreateInputActions() moved to SetupPlayerInputComponent to fix null binding issue. |
| 13 | Inventory system — complete | 2026-02-25 | WBP_ItemTooltip (parent: UItemTooltipWidget) — ItemNameText, DescriptionText, StatsText, IconImage. Tooltip shows on mouse enter, hides on mouse leave and right-click. Context menu: OnClosed event dispatcher clears ContextMenuInstance reference. Assign to Hotbar button added (Weapon/Consumable). Backpack test asset (DA_Backpack, BonusSlots=4). Tooltip/context menu ordering fixed — tooltip removed before context menu opens, Is In Viewport guard in On Focus Lost prevents double-removal on spam. |
